"use strict";jse.extensions.module("validator",["fallback"],function(e){var t=$(this),a={required:function(e,t,a,r){switch(a){case"select":return parseInt(t,10)!==-1;case"checkbox":return parseInt(t,10)!==-1;case"radio":return!1;default:return!!t}},email:function(e,t,a,r){if(""===t&&r.validate.indexOf("required")===-1)return e.removeClass("error valid"),null;var i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return i.test(t)},ckeditor:function(e,t,a,r){var i=e.attr("id");if(void 0===i)throw"Cannot validate CKEditor for element without id attribute.";return""!==CKEDITOR.instances[i].getData()}},r={},i=($.extend(!0,{},r,e),{}),n=function(e,t){switch(t){case"valid":e.removeClass("error").addClass("valid");break;case"error":e.removeClass("valid").addClass("error");break;default:e.removeClass("valid error")}},l=function(){var e=$(this),t=jse.libs.fallback._data(e,"validator"),r=t.validate?t.validate.split(" "):[],i=e.prop("tagName").toLowerCase(),l=!0;return i="input"!==i?i:e.attr("type").toLowerCase(),$.each(r,function(r,o){var d=a[o](e,e.val(),i,t);null!==d&&(n(e,d?"valid":"error"),l=!!l&&d)}),l},o=function(e,a){e&&(e.preventDefault(),e.stopPropagation());var r=e?$(e.target):t,i=!0;return r.filter(".validate").add(r.find(".validate")).each(function(){var e=l.call($(this));i=!!i&&e}),a&&a.deferred&&(i?a.deferred.resolve():a.deferred.reject()),i},d=function(){t.filter(".validate").add(t.find(".validate")).each(function(){n($(this),"reset")})};return i.init=function(e){t.on("change",".validate:text:visible",l).on("validator.validate",o).on("validator.reset",d).on("submit",function(e){o()||e.preventDefault()}),e()},i});