"use strict";jse.libs.storage=jse.libs.storage||{},function(e){var s=void 0!==Storage,r=function(e,r,o,a,t){var n=null,l=null;return!!s&&(n=e.getItem("user_"+t),n=n||"{}",n=$.parseJSON(n),r||void 0===n[o]?n[o]=a:n[o]=$.extend({},n[o],a),l=JSON.stringify(n),e.setItem("user_"+t,l),!0)},o=function(e,r,o){var a=null;return s?(a=e.getItem("user_"+o),a=a||"{}",a=$.parseJSON(a),a[r]||{}):{}};e.store=function(e,s,o){var a=$("body").data().userId,t={},n=[];return $.each(e,function(e,l){var i=$.Deferred();switch(n.push(i),e){case"session":t.session=r(sessionStorage,o,l,s,a),i.resolve(t);break;case"local":t.local=r(localStorage,o,l,s,a),i.resolve(t);break;case"server":i.resolve(t)}}),$.when.apply(void 0,n).promise()},e.restore=function(e){var s=$("body").data().userId,r={},a=[];return $.each(e,function(e,t){var n=$.Deferred();switch(a.push(n),e){case"session":r.session=o(sessionStorage,t,s),n.resolve(r);break;case"local":r.local=o(localStorage,t,s),n.resolve(r);break;case"server":n.resolve(r)}}),$.when.apply(void 0,a).then(function(e){return $.extend(!0,{},e.local||{},e.session||{},e.server||{})}).promise()}}(jse.libs.storage);