"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};jse.libs.form=jse.libs.form||{},function(e){function t(e,t){e=decodeURIComponent(e||location.href);var n=e.split("?"),a=n.length>1?n[1].split("&"):[],o=new RegExp(/\[(.*?)\]/g),r={};return $.each(a,function(e,n){var a=n.split("="),c=o.exec(a[0]),i=null,l=a[0].substring(0,a[0].search("\\[")),p=[],s=null;if(t&&null!==c){r[l]=r[l]||[],i=r[l];do p.push(c[1]),c=o.exec(a[0]);while(null!==c);$.each(p,function(e,t){var n=p[e+1];t=t||"0","string"==typeof n?(i[t]=i[t]||[],i=i[t]):(i[t]=i[t]||void 0,s=t)}),null!==s?i[s]=a[1]:i=a[1]}else r[a[0]]=a[1].split("#")[0]}),r}e.createOptions=function(e,t,n,a){var o=[],r=function(e,t){return e=e.name.toLowerCase(),t=t.name.toLowerCase(),e<t?-1:1};t=a?t.sort(r):t,n&&o.push($('<option value="-1"> </option>')),$.each(t,function(e,t){var n=$('<option value="'+t.value+'">'+t.name+"</option>");n.data("data",t),o.push(n)}),e.append(o)},e.prefillForm=function(e,t,n){$.each(t,function(t,a){var o=e.find('[name="'+t+'"]'),r=null;if(o.length){switch(r=o.prop("tagName").toLowerCase(),r="input"!==r?r:o.attr("type").toLowerCase()){case"select":"object"===("undefined"==typeof a?"undefined":_typeof(a))?$.each(a,function(e,t){o.find('option[value="'+t+'"]').prop("selected",!0)}):o.find('option[value="'+a+'"]').prop("selected",!0);break;case"checkbox":o.prop("checked","false"!==a);break;case"radio":o.prop("checked",!1),o.each(function(){var e=$(this);e.val()===a.toString()&&e.prop("checked",!0)});break;case"textarea":o.text(a);break;default:o.val(a)}n&&o.trigger("change",[])}})},e.getData=function(e,t,n){var a=e.find("input, textarea, select"),o={};return t&&(a=a.filter(":not("+t+")")),a.each(function(){var e=$(this),t=e.prop("tagName").toLowerCase(),r=e.attr("name"),c=new RegExp(/\[(.*?)\]/g),i=c.exec(r),l=5,p=null,s=null,u=null,f=null;if(t="input"!==t?t:e.attr("type").toLowerCase(),null!==i){var d=r.substring(0,r.search("\\[")),h=[];o[d]=o[d]||(n?{}:[]),u=o[d];do h.push(i[1]),i=c.exec(r),l-=1;while(null!==i||l<=0);$.each(h,function(e,a){var o=h[e+1];a=a||"0","string"==typeof o?(u[a]=u[a]||(n?{}:[]),u=u[a]):"radio"!==t&&(a=a&&"0"!==a?a:n?Object.keys(u).length:u.length,u[a]=u[a]||void 0),f=a})}switch(t){case"radio":s=a.filter('input[name="'+e.attr("name")+'"]:checked').val();break;case"checkbox":s=!!e.prop("checked")&&e.val();break;case"select":p=e.find(":selected"),p.length>1?(s=[],p.each(function(){s.push($(this).val())})):s=p.val();break;case"button":break;default:r&&(s=e.val())}null!==u?u[f]=s:o[r]=s}),o},e.getFieldType=function(e){var t=e.prop("tagName").toLowerCase();return"input"!==t?t:e.attr("type").toLowerCase()},e.addHiddenByUrl=function(n,a){var o=t(null),r=null,c="",i=[];$.each(o,function(e,t){t&&(r=n.find('[name="'+e+'"]'),0===r.length?c+='<input type="hidden" name="'+e+'" value="'+t+'" />':i.push(e,t))}),a&&e.prefillForm(n,i),n.prepend(c)},e.reset=function(t){t.find("select, input, textarea").each(function(){var n=$(this),a=e.getFieldType(n);switch(a){case"radio":t.find('input[name="'+n.attr("name")+'"]:checked').prop("checked",!1).first().prop("checked",!0);break;case"checkbox":n.prop("checked",!1);break;case"select":n.children().first().prop("selected",!0);break;case"textarea":n.val("");break;case"text":n.val("")}})}}(jse.libs.form);