!function(t){function i(){t.each(s,function(){this.refresh(!0)})}var s=[],e=/^url\(["']?([^"'\)]*)["']?\);?$/i,o=/\.png$/i,h=t.browser.msie&&6==t.browser.version;t(window).resize(i),t.Tooltip=function(i,s){this.$elm=t(i),this.opts=t.extend({},t.fn.tooltip_plugin.defaults,s),this.$tip=t(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body),this.$arrow=this.$tip.find("div.tip-arrow"),this.$inner=this.$tip.find("div.tip-inner"),this.disabled=!1,this.content=null,this.init()},t.Tooltip.prototype={init:function(){s.push(this);var i=this.$elm.attr("title");if("undefined"!=typeof i&&""!=i||(i=this.$elm.html(),this.$elm.html("")),"undefined"==typeof this.$elm.attr("original_title")&&this.$elm.attr("original_title",void 0!==i?i:null),this.$elm.data("title.tooltip_plugin",void 0!==i?i:null).data("tooltip_plugin",this),"none"!=this.opts.showOn)switch(this.$elm.bind({"mouseenter.tooltip_plugin":t.proxy(this.mouseenter,this),"mouseleave.tooltip_plugin":t.proxy(this.mouseleave,this)}),this.opts.showOn){case"hover":"cursor"==this.opts.alignTo&&this.$elm.bind("mousemove.tooltip_plugin",t.proxy(this.mousemove,this)),this.opts.allowTipHover&&this.$tip.hover(t.proxy(this.clearTimeouts,this),t.proxy(this.mouseleave,this)),this.$elm.bind({"blur.tooltip_plugin":t.proxy(this.hide,this)});break;case"focus":this.$elm.bind({"focus.tooltip_plugin":t.proxy(this.show,this),"blur.tooltip_plugin":t.proxy(this.hide,this)})}},mouseenter:function(i){return!!this.disabled||(this.$elm.attr("title",""),"focus"==this.opts.showOn||(this.clearTimeouts(),void(this.showTimeout=setTimeout(t.proxy(this.show,this),this.opts.showTimeout))))},mouseleave:function(i){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===i.relatedTarget||jQuery.contains(this.$tip[0],i.relatedTarget)))return!0;var s=this.$elm.data("title.tooltip_plugin");return null!==s&&this.$elm.attr("title",s),"focus"==this.opts.showOn||(this.clearTimeouts(),void(this.hideTimeout=setTimeout(t.proxy(this.hide,this),this.opts.hideTimeout)))},mousemove:function(t){return!!this.disabled||(this.eventX=t.pageX,this.eventY=t.pageY,void(this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow))))},show:function(){"undefined"!=typeof this.$tip&&(this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.display(),this.opts.timeOnScreen&&setTimeout(t.proxy(this.hide,this),this.opts.timeOnScreen)))},hide:function(){this.display(!0)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1),this.$inner.find("*").tooltip_plugin("hide"),this.opts.fade&&this.$tip.css("opacity",this.opacity),this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left",this.asyncAnimating=!1},reset_content:function(){void 0!==this.$elm.attr("original_title")&&this.update(this.$elm.attr("original_title"))},update:function(t,i){if(!this.disabled){var s=void 0!==t;if(s){if(i||(this.opts.content=t),!this.$tip.data("active"))return}else t=this.opts.content;var e=this,o="function"==typeof t?t.call(this.$elm[0],function(t){e.update(t)}):"[title]"==t?this.$elm.data("title.tooltip_plugin"):t;this.content!==o&&(this.$inner.empty().append(o),this.content=o),this.refresh(s)}},refresh:function(i){if(!this.disabled){if(i){if(!this.$tip.data("active"))return;var s={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body),void 0===this.opacity&&(this.opacity=this.$tip.css("opacity"));var r=this.$tip.css("background-image").match(e),a=this.$arrow.css("background-image").match(e);if(r){var p=o.test(r[1]);h&&p?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),r=p=!1):this.$tip.prepend('<table border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+r[1]+'")').end().find("td").eq(3).append(this.$inner),p&&!t.support.opacity&&(this.opts.fade=!1)}a&&!t.support.opacity&&(h&&o.test(a[1])&&(a=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1);var n=this.$tip.find("table");if(h){this.$tip[0].style.width="",n.width("auto").find("td").eq(3).width("auto");var l=this.$tip.width(),d=parseInt(this.$tip.css("min-width")),u=parseInt(this.$tip.css("max-width"));!isNaN(d)&&l<d?l=d:!isNaN(u)&&l>u&&(l=u),this.$tip.add(n).width(l).eq(0).find("td").eq(3).width("100%")}else n[0]&&n.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%");if(this.tipOuterW=this.$tip.outerWidth(),this.tipOuterH=this.$tip.outerHeight(),this.calcPos(),a&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow,this.$arrow.css("visibility","inherit")),i){this.asyncAnimating=!0;var c=this;this.$tip.css(s).animate({left:this.pos.l,top:this.pos.t},200,function(){c.asyncAnimating=!1})}else this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(i){if("undefined"!=typeof this.$tip){var s=this.$tip.data("active");if(!(s&&!i||!s&&i)){if(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(i&&this.opts.hideAniDuration||!i&&this.opts.showAniDuration)){var e={},o={};if(this.opts.slide&&this.pos.arrow){var h,r;"bottom"==this.pos.arrow||"top"==this.pos.arrow?(h="top",r="bottom"):(h="left",r="right");var a=parseInt(this.$tip.css(h));e[h]=a+(i?0:this.pos.arrow==r?-this.opts.slideOffset:this.opts.slideOffset),o[h]=a+(i?this.pos.arrow==r?this.opts.slideOffset:-this.opts.slideOffset:0)+"px"}this.opts.fade&&(e.opacity=i?this.$tip.css("opacity"):0,o.opacity=i?0:this.opacity),this.$tip.css(e).animate(o,this.opts[i?"hideAniDuration":"showAniDuration"])}i?this.$tip.queue(t.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),this.$tip.data("active",!s)}}},disable:function(){this.reset(),this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.reset(),this.$tip.remove(),delete this.$tip,this.content=null,this.$elm.unbind(".tooltip_plugin").removeData("title.tooltip_plugin").removeData("tooltip_plugin"),s.splice(t.inArray(this,s),1)},clearTimeouts:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},calcPos:function(){var i,s,e,o,h,r,a={l:0,t:0,arrow:""},p=t(window),n={l:p.scrollLeft(),t:p.scrollTop(),w:p.width(),h:p.height()};if("cursor"==this.opts.alignTo)i=s=e=this.eventX,o=h=r=this.eventY;else{var l=this.$elm.offset(),d={l:l.left,t:l.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};i=d.l+("inner-right"!=this.opts.alignX?0:d.w),s=i+Math.floor(d.w/2),e=i+("inner-left"!=this.opts.alignX?d.w:0),o=d.t+("inner-bottom"!=this.opts.alignY?0:d.h),h=o+Math.floor(d.h/2),r=o+("inner-top"!=this.opts.alignY?d.h:0)}switch(this.opts.alignX){case"right":case"inner-left":a.l=e+this.opts.offsetX,"right"!=this.opts.alignX&&"center"!=this.opts.alignY||(a.arrow="left"),a.l+this.tipOuterW>n.l+n.w&&(a.l=i-this.tipOuterW-this.opts.offsetX,a.arrow="right");break;case"center":a.l=s-Math.floor(this.tipOuterW/2),a.l+this.tipOuterW>n.l+n.w?a.l=n.l+n.w-this.tipOuterW:a.l<n.l&&(a.l=n.l);break;default:a.l=i-this.tipOuterW-this.opts.offsetX,a.l<n.l&&(a.l=n.l),"left"!=this.opts.alignX&&"center"!=this.opts.alignY||(a.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":a.t=r+this.opts.offsetY,a.arrow&&"cursor"!=this.opts.alignTo||(a.arrow="top"),a.t+this.tipOuterH>n.t+n.h&&(a.t=o-this.tipOuterH-this.opts.offsetY,"top"==a.arrow&&(a.arrow="bottom"));break;case"center":a.t=h-Math.floor(this.tipOuterH/2),a.t+this.tipOuterH>n.t+n.h?a.t=n.t+n.h-this.tipOuterH:a.t<n.t&&(a.t=n.t);break;default:a.t=o-this.tipOuterH-this.opts.offsetY,a.arrow&&"cursor"!=this.opts.alignTo||(a.arrow="bottom"),a.t<n.t&&(a.t=r+this.opts.offsetY,"bottom"==a.arrow&&(a.arrow="top"))}this.pos=a}},t.fn.tooltip_plugin=function(i){return void t.initialize_tooltip_plugin()},t.fn.tooltip_plugin.defaults={content:"[title]",className:"tip-twitter",bgImageFrameSize:10,showTimeout:300,hideTimeout:50,timeOnScreen:0,showOn:"hover",liveEvents:!0,alignTo:"target",alignX:"right",alignY:"center",offsetX:10,offsetY:10,allowTipHover:!1,followCursor:!1,fade:!0,slide:!1,slideOffset:8,showAniDuration:200,hideAniDuration:150}}(jQuery),jQuery.extend({initialize_tooltip_plugin:function(){return $("input[tooltip_title], select[tooltip_title], textarea[tooltip_title]").each(function(){$(this).not(":disabled")&&$(this).attr("title",$(this).attr("tooltip_title")).removeAttr("tooltip_title")}),$("input[title], select[title], textarea[title]").each(function(){$(this).is(":disabled")&&$(this).attr("tooltip_title",$(this).attr("title")).removeAttr("title")}),$("div.tooltip_wrapper, .tooltip, input[title], select[title], textarea[title]").qtip({style:{classes:"qtip-tipsy"},position:{my:"left center",at:"right center"}}),!1},destroy_tooltip_plugin:function(){return!1}}),$("body").on("mousemove","*[tooltip_title]",function(){$.destroy_tooltip_plugin(),$.initialize_tooltip_plugin(),$(this).tooltip_plugin("show")}),$(document).ready(function(){$.initialize_tooltip_plugin()});