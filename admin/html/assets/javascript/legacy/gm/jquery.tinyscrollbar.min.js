!function(e,t,n){e.fn.jScrollPane=function(o){function i(o,i){function s(t){var i,a,l,u,d,f,g=!1,v=!1;if(O=t,V===n)d=o.scrollTop(),f=o.scrollLeft(),o.css({overflow:"hidden",padding:0}),G=o.innerWidth()+be,q=o.innerHeight(),o.width(G),V=e('<div class="jspPane" />').css("padding",me).append(o.children()),E=e('<div class="jspContainer" />').css({width:G+"px",height:q+"px"}).append(V).appendTo(o);else{if(o.css("width",""),g=O.stickToBottom&&H(),v=O.stickToRight&&P(),u=o.innerWidth()+be!=G||o.outerHeight()!=q,u&&(G=o.innerWidth()+be,q=o.innerHeight(),E.css({width:G+"px",height:q+"px"})),!u&&we==N&&V.outerHeight()==K)return void o.width(G);we=N,V.css("width",""),o.width(G),E.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}V.css("overflow","auto"),N=t.contentWidth?t.contentWidth:V[0].scrollWidth,K=V[0].scrollHeight,V.css("overflow",""),Q=N/G,U=K/q,$=U>1,J=Q>1,J||$?(o.addClass("jspScrollable"),i=O.maintainPosition&&(ee||oe),i&&(a=D(),l=S()),r(),c(),p(),i&&(T(v?N-G:a,!1),C(g?K-q:l,!1)),Y(),x(),L(),O.enableKeyboardNavigation&&X(),O.clickOnTrack&&h(),z(),O.hijackInternalLinks&&I()):(o.removeClass("jspScrollable"),V.css({top:0,width:E.width()-be}),A(),M(),R(),j()),O.autoReinitialise&&!ve?ve=setInterval(function(){s(O)},O.autoReinitialiseDelay):!O.autoReinitialise&&ve&&clearInterval(ve),d&&o.scrollTop(0)&&C(d,!1),f&&o.scrollLeft(0)&&T(f,!1),o.trigger("jsp-initialised",[J||$])}function r(){$&&(E.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),ie=E.find(">.jspVerticalBar"),se=ie.find(">.jspTrack"),Z=se.find(">.jspDrag"),O.showArrows&&(le=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",d(0,-1)).bind("click.jsp",W),pe=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",d(0,1)).bind("click.jsp",W),O.arrowScrollOnHover&&(le.bind("mouseover.jsp",d(0,-1,le)),pe.bind("mouseover.jsp",d(0,1,pe))),u(se,O.verticalArrowPositions,le,pe)),ae=q,E.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ae-=e(this).outerHeight()}),Z.hover(function(){Z.addClass("jspHover")},function(){Z.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",W),Z.addClass("jspActive");var n=t.pageY-Z.position().top;return e("html").bind("mousemove.jsp",function(e){v(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),a())}function a(){se.height(ae+"px"),ee=0,re=O.verticalGutter+se.outerWidth();try{0===ie.position().left&&V.css("margin-left",re+"px")}catch(e){}}function c(){J&&(E.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ue=E.find(">.jspHorizontalBar"),de=ue.find(">.jspTrack"),te=de.find(">.jspDrag"),O.showArrows&&(je=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",d(-1,0)).bind("click.jsp",W),ge=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",d(1,0)).bind("click.jsp",W),O.arrowScrollOnHover&&(je.bind("mouseover.jsp",d(-1,0,je)),ge.bind("mouseover.jsp",d(1,0,ge))),u(de,O.horizontalArrowPositions,je,ge)),te.hover(function(){te.addClass("jspHover")},function(){te.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",W),te.addClass("jspActive");var n=t.pageX-te.position().left;return e("html").bind("mousemove.jsp",function(e){b(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),fe=E.innerWidth(),l())}function l(){E.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){fe-=e(this).outerWidth()}),de.width(fe+"px"),oe=0}function p(){if(J&&$){var t=de.outerHeight(),n=se.outerWidth();ae-=t,e(ue).find(">.jspCap:visible,>.jspArrow").each(function(){fe+=e(this).outerWidth()}),fe-=n,q-=n,G-=t,de.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),a(),l()}K=V.outerHeight(),U=K/q,J&&(he=Math.ceil(1/Q*fe),he>O.horizontalDragMaxWidth?he=O.horizontalDragMaxWidth:he<O.horizontalDragMinWidth&&(he=O.horizontalDragMinWidth),te.width(he+"px"),ne=fe-he,w(oe)),$&&(ce=Math.ceil(1/U*ae),ce>O.verticalDragMaxHeight?ce=O.verticalDragMaxHeight:ce<O.verticalDragMinHeight&&(ce=O.verticalDragMinHeight),Z.height(ce+"px"),_=ae-ce,m(ee))}function u(e,t,n,o){var i,s="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==s?r=t:t==r&&(s=t,i=n,n=o,o=i),e[s](n)[r](o)}function d(e,t,n){return function(){return f(e,t,this,n),this.blur(),!1}}function f(t,n,o,i){o=e(o).addClass("jspActive");var s,r,a=!0,c=function(){0!==t&&ke.scrollByX(t*O.arrowButtonSpeed),0!==n&&ke.scrollByY(n*O.arrowButtonSpeed),r=setTimeout(c,a?O.initialDelay:O.arrowRepeatFreq),a=!1};c(),s=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(s,function(){o.removeClass("jspActive"),r&&clearTimeout(r),r=null,i.unbind(s)})}function h(){j(),$&&se.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var o,i=e(this),s=i.offset(),r=t.pageY-s.top-ee,a=!0,c=function(){var e=i.offset(),n=t.pageY-e.top-ce/2,s=q*O.scrollPagePercent,p=_*s/(K-q);if(r<0)ee-p>n?ke.scrollByY(-s):v(n);else{if(!(r>0))return void l();ee+p<n?ke.scrollByY(s):v(n)}o=setTimeout(c,a?O.initialDelay:O.trackClickRepeatFreq),a=!1},l=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",l)};return c(),e(document).bind("mouseup.jsp",l),!1}}),J&&de.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var o,i=e(this),s=i.offset(),r=t.pageX-s.left-oe,a=!0,c=function(){var e=i.offset(),n=t.pageX-e.left-he/2,s=G*O.scrollPagePercent,p=ne*s/(N-G);if(r<0)oe-p>n?ke.scrollByX(-s):b(n);else{if(!(r>0))return void l();oe+p<n?ke.scrollByX(s):b(n)}o=setTimeout(c,a?O.initialDelay:O.trackClickRepeatFreq),a=!1},l=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",l)};return c(),e(document).bind("mouseup.jsp",l),!1}})}function j(){de&&de.unbind("mousedown.jsp"),se&&se.unbind("mousedown.jsp")}function g(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Z&&Z.removeClass("jspActive"),te&&te.removeClass("jspActive")}function v(e,t){$&&(e<0?e=0:e>_&&(e=_),t===n&&(t=O.animateScroll),t?ke.animate(Z,"top",e,m):(Z.css("top",e),m(e)))}function m(e){e===n&&(e=Z.position().top),E.scrollTop(0),ee=e;var t=0===ee,i=ee==_,s=e/_,r=-s*(K-q);ye==t&&Te==i||(ye=t,Te=i,o.trigger("jsp-arrow-change",[ye,Te,Ce,Be])),k(t,i),V.css("top",r),o.trigger("jsp-scroll-y",[-r,t,i]).trigger("scroll")}function b(e,t){J&&(e<0?e=0:e>ne&&(e=ne),t===n&&(t=O.animateScroll),t?ke.animate(te,"left",e,w):(te.css("left",e),w(e)))}function w(e){e===n&&(e=te.position().left),E.scrollTop(0),oe=e;var t=0===oe,i=oe==ne,s=e/ne,r=-s*(N-G);Ce==t&&Be==i||(Ce=t,Be=i,o.trigger("jsp-arrow-change",[ye,Te,Ce,Be])),y(t,i),V.css("left",r),o.trigger("jsp-scroll-x",[-r,t,i]).trigger("scroll")}function k(e,t){O.showArrows&&(le[e?"addClass":"removeClass"]("jspDisabled"),pe[t?"addClass":"removeClass"]("jspDisabled"))}function y(e,t){O.showArrows&&(je[e?"addClass":"removeClass"]("jspDisabled"),ge[t?"addClass":"removeClass"]("jspDisabled"))}function C(e,t){var n=e/(K-q);v(n*_,t)}function T(e,t){var n=e/(N-G);b(n*ne,t)}function B(t,n,o){var i,s,r,a,c,l,p,u,d,f=0,h=0;try{i=e(t)}catch(j){return}for(s=i.outerHeight(),r=i.outerWidth(),E.scrollTop(0),E.scrollLeft(0);!i.is(".jspPane");)if(f+=i.position().top,h+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;a=S(),l=a+q,f<a||n?u=f-O.verticalGutter:f+s>l&&(u=f-q+s+O.verticalGutter),u&&C(u,o),c=D(),p=c+G,h<c||n?d=h-O.horizontalGutter:h+r>p&&(d=h-G+r+O.horizontalGutter),d&&T(d,o)}function D(){return-V.position().left}function S(){return-V.position().top}function H(){var e=K-q;return e>20&&e-S()<10}function P(){var e=N-G;return e>20&&e-D()<10}function x(){E.unbind(Se).bind(Se,function(e,t,n,o){return ke.scrollBy(n*O.mouseWheelSpeed,-o*O.mouseWheelSpeed,!1),!1})}function A(){E.unbind(Se)}function W(){return!1}function Y(){V.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){B(e.target,!1)})}function M(){V.find(":input,a").unbind("focus.jsp")}function X(){function t(){var e=oe,t=ee;switch(n){case 40:ke.scrollByY(O.keyboardSpeed,!1);break;case 38:ke.scrollByY(-O.keyboardSpeed,!1);break;case 34:case 32:ke.scrollByY(q*O.scrollPagePercent,!1);break;case 33:ke.scrollByY(-q*O.scrollPagePercent,!1);break;case 39:ke.scrollByX(O.keyboardSpeed,!1);break;case 37:ke.scrollByX(-O.keyboardSpeed,!1)}return i=e!=oe||t!=ee}var n,i,s=[];J&&s.push(ue[0]),$&&s.push(ie[0]),V.focus(function(){o.focus()}),o.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(o){if(o.target===this||s.length&&e(o.target).closest(s).length){var r=oe,a=ee;switch(o.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=o.keyCode,t();break;case 35:C(K-q),n=null;break;case 36:C(0),n=null}return i=o.keyCode==n&&r!=oe||a!=ee,!i}}).bind("keypress.jsp",function(e){return e.keyCode==n&&t(),!i}),O.hideFocus?(o.css("outline","none"),"hideFocus"in E[0]&&o.attr("hideFocus",!0)):(o.css("outline",""),"hideFocus"in E[0]&&o.attr("hideFocus",!1))}function R(){o.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function z(){if(location.hash&&location.hash.length>1){var t,n,o=escape(location.hash.substr(1));try{t=e("#"+o+', a[name="'+o+'"]')}catch(i){return}t.length&&V.find(o)&&(0===E.scrollTop()?n=setInterval(function(){E.scrollTop()>0&&(B(t,!0),e(document).scrollTop(E.position().top),clearInterval(n))},50):(B(t,!0),e(document).scrollTop(E.position().top)))}}function I(){e(document.body).data("jspHijack")||(e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(n){var o,i,s,r,a,c,l=this.href.substr(0,this.href.indexOf("#")),p=location.href;if(location.href.indexOf("#")!==-1&&(p=location.href.substr(0,location.href.indexOf("#"))),l===p){o=escape(this.href.substr(this.href.indexOf("#")+1));try{i=e("#"+o+', a[name="'+o+'"]')}catch(u){return}i.length&&(s=i.closest(".jspScrollable"),r=s.data("jsp"),r.scrollToElement(i,!0),s[0].scrollIntoView&&(a=e(t).scrollTop(),c=i.offset().top,(c<a||c>a+e(t).height())&&s[0].scrollIntoView()),n.preventDefault())}}))}function L(){var e,t,n,o,i,s=!1;E.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var a=r.originalEvent.touches[0];e=D(),t=S(),n=a.pageX,o=a.pageY,i=!1,s=!0}).bind("touchmove.jsp",function(r){if(s){var a=r.originalEvent.touches[0],c=oe,l=ee;return ke.scrollTo(e+n-a.pageX,t+o-a.pageY),i=i||Math.abs(n-a.pageX)>5||Math.abs(o-a.pageY)>5,c==oe&&l==ee}}).bind("touchend.jsp",function(e){s=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function F(){var e=S(),t=D();o.removeClass("jspScrollable").unbind(".jsp"),o.replaceWith(De.append(V.children())),De.scrollTop(e),De.scrollLeft(t),ve&&clearInterval(ve)}var O,V,G,q,E,N,K,Q,U,$,J,Z,_,ee,te,ne,oe,ie,se,re,ae,ce,le,pe,ue,de,fe,he,je,ge,ve,me,be,we,ke=this,ye=!0,Ce=!0,Te=!1,Be=!1,De=o.clone(!1,!1).empty(),Se=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";me=o.css("paddingTop")+" "+o.css("paddingRight")+" "+o.css("paddingBottom")+" "+o.css("paddingLeft"),be=(parseInt(o.css("paddingLeft"),10)||0)+(parseInt(o.css("paddingRight"),10)||0),e.extend(ke,{reinitialise:function(t){t=e.extend({},O,t),s(t)},scrollToElement:function(e,t,n){B(e,t,n)},scrollTo:function(e,t,n){T(e,n),C(t,n)},scrollToX:function(e,t){T(e,t)},scrollToY:function(e,t){C(e,t)},scrollToPercentX:function(e,t){T(e*(N-G),t)},scrollToPercentY:function(e,t){C(e*(K-q),t)},scrollBy:function(e,t,n){ke.scrollByX(e,n),ke.scrollByY(t,n)},scrollByX:function(e,t){var n=D()+Math[e<0?"floor":"ceil"](e),o=n/(N-G);b(o*ne,t)},scrollByY:function(e,t){var n=S()+Math[e<0?"floor":"ceil"](e),o=n/(K-q);v(o*_,t)},positionDragX:function(e,t){b(e,t)},positionDragY:function(e,t){v(e,t)},animate:function(e,t,n,o){var i={};i[t]=n,e.animate(i,{duration:O.animateDuration,easing:O.animateEase,queue:!1,step:o})},getContentPositionX:function(){return D()},getContentPositionY:function(){return S()},getContentWidth:function(){return N},getContentHeight:function(){return K},getPercentScrolledX:function(){return D()/(N-G)},getPercentScrolledY:function(){return S()/(K-q)},getIsScrollableH:function(){return J},getIsScrollableV:function(){return $},getContentPane:function(){return V},scrollToBottom:function(e){v(_,e)},hijackInternalLinks:e.noop,destroy:function(){F()}}),s(i)}return o=e.extend({},e.fn.jScrollPane.defaults,o),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){o[this]=o[this]||o.speed}),this.each(function(){var t=e(this),n=t.data("jsp");n?n.reinitialise(o):(e("script",t).filter('[type="text/javascript"],:not([type])').remove(),n=new i(t,o),t.data("jsp",n))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!0,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this);