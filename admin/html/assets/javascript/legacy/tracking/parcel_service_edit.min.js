function show_confirm_lightbox(e){var i=$("<a href='lightbox_confirm.html?section=parcel_services&amp;message=discard_changes_message&amp;buttons=cancel-discard'></a>"),t=$(i).lightbox_plugin({background_color:"#EFEFEF",lightbox_width:"360px",shadow_close_onclick:!1});return $("#lightbox_package_"+t).on("click",".discard",function(){$.lightbox_plugin("close",t),$.lightbox_plugin("close",e)}),!1}function update_current_context(){var e=$(".parcel_service_name",t_lightbox_package).val();""==$.trim(e)&&(e="-"),$(".current_context span",t_lightbox_package).text(e)}function save_parcel_service(){return $("#parcel_service_edit_form",t_lightbox_package).validation_plugin(),!($("#parcel_service_edit_form .row.error",t_lightbox_package).length>0)&&(!$(this).hasClass("active")&&($(this).addClass("active"),void $.ajax({type:"POST",url:"request_port.php?module=ParcelServices&action=save_parcel_service",timeout:3e4,dataType:"json",context:this,data:{parcel_service_id:t_lightbox_parameters["_"+t_lightbox_identifier].parcel_service_id,form_data:$("#parcel_service_edit_form *",t_lightbox_package).serialize()},success:function(e){$("#parcel_services_wrapper").html(e.html),$("#parcel_service_edit_form",t_lightbox_package).form_changes_checker("initialize",!1),$.lightbox_plugin("close",t_lightbox_identifier)},error:function(e,i){$.lightbox_plugin("error",t_lightbox_identifier,e,i)}})))}function close_parcel_service_edit(e,i){var t=$("#parcel_service_edit_form",t_lightbox_package).form_changes_checker();t.length>0&&1!=i?show_confirm_lightbox(t_lightbox_identifier,"click"):$.lightbox_plugin("close",t_lightbox_identifier)}$(t_lightbox_package).delegate(".save","click",save_parcel_service),$(t_lightbox_package).delegate(".close","click",close_parcel_service_edit),$(t_lightbox_package).delegate(".parcel_service_name","keyup",update_current_context),$("#parcel_service_edit_form",t_lightbox_package).form_changes_checker("initialize",!1);