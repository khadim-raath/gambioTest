"use strict";gx.extensions.module("validator",["fallback"],function(e){var a=$(this),t={required:function(e,a,t,r){switch(t){case"select":return parseInt(a,10)!==-1;case"checkbox":return parseInt(a,10)!==-1;case"radio":return!1;default:return!!a}},email:function(e,a,t,r){if(""===a&&r.validate.indexOf("required")===-1)return e.removeClass("error valid"),null;var i=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return i.test(a)},ckeditor:function(e,a,t,r){var i=e.attr("id");if(void 0===i)throw"Cannot validate CKEditor for element without id attribute.";return""!==CKEDITOR.instances[i].getData()}},r={},i=($.extend(!0,{},r,e),{}),n=function(e,a){switch(a){case"valid":e.removeClass("error").addClass("valid");break;case"error":e.removeClass("valid").addClass("error");break;default:e.removeClass("valid error")}},l=function(){var e=$(this),a=jse.libs.fallback._data(e,"validator"),r=a.validate?a.validate.split(" "):[],i=e.prop("tagName").toLowerCase(),l=!0;return i="input"!==i?i:e.attr("type").toLowerCase(),$.each(r,function(r,o){var d=t[o](e,e.val(),i,a);null!==d&&(n(e,d?"valid":"error"),l=!!l&&d)}),l},o=function(e,a){e.preventDefault(),e.stopPropagation();var t=$(e.target),r=!0;t.filter(".validate").add(t.find(".validate")).each(function(){var e=l.call($(this));r=!!r&&e}),a&&a.deferred&&(r?a.deferred.resolve():a.deferred.reject())},d=function(){a.filter(".validate").add(a.find(".validate")).each(function(){n($(this),"reset")})};return i.init=function(e){a.on("change",".validate:text:visible",l).on("validator.validate",o).on("validator.reset",d).on("submit",function(e){e.preventDefault()}),e()},i});