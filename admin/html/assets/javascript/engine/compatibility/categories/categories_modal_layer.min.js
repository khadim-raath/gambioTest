"use strict";gx.compatibility.module("categories_modal_layer",[],function(e){var t=$(this),n=$(this).parents("table:first"),a=($("#modal_layer_container"),{}),i=$.extend(!0,{},a,e),o={},c=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0},d=function(){var e=[];switch(i.action){case"delete":e.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close");var e=n.find("a.btn").attr("href");window.open(e,"_self")}},{text:jse.core.lang.translate("delete","buttons"),"class":"btn btn-primary",click:function(){var e=$('input[name="page_token"]').attr("value"),t=$("tr[data-id]").has('input[type="checkbox"]:checked').data(),n=[window.location.origin,window.location.pathname,"?action=multi_action_confirm",(t.isProduct?"&pID=":"&cID=")+t.id,"&cPath="+t.cpath].join(""),a=c("search");0!==a&&null!==a&&(n+="&search="+a);var i=$('<form name="multi_action_form" method="post" action='+n+"></form>");i.append('<input type="hidden" name="cPath" value='+t.cpath+">"),i.append('<input type="hidden" name="page_token" value='+e+">"),$("tr[data-id]").find('input[type="checkbox"]:checked').clone().appendTo(i),$(this).find('input[type="checkbox"]:checked').clone().appendTo(i),i.append('<input type="hidden" name="multi_delete_confirm" value="DeleteConfirm">'),i.appendTo("body"),i.submit()}});break;case"move":e.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close");var e=n.find("a.btn").attr("href");window.open(e,"_self")}},{text:jse.core.lang.translate("BUTTON_MOVE","admin_buttons"),"class":"btn btn-primary",click:function(){var e=$('input[name="page_token"]:first').attr("value"),t=$("tr[data-id]").has('input[type="checkbox"]:checked').data(),a=$(this).find('select[name="move_to_category_id"] option:selected').val(),i=[window.location.origin,window.location.pathname,"?action=multi_action_confirm",(t.isProduct?"&pID=":"&cID=")+t.id,"&cPath="+t.cpath].join(""),o=$('<form name="multi_action_form" method="post" action='+i+"></form>");o.append('<input type="hidden" name="cPath" value='+t.cpath+">"),o.append('<input type="hidden" name="page_token" value='+e+">"),$("tr[data-id]").find('input[type="checkbox"]:checked').clone().appendTo(o),n.find('input[name="src_category_id"]').clone().appendTo(o),o.append('<input type="hidden" name="move_to_category_id" value='+a+">"),o.append('<input type="hidden" name="multi_move_confirm" value="MoveConfirm">'),o.appendTo("body"),o.submit()}});break;case"copy":e.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close");var e=n.find("a.btn").attr("href");window.open(e,"_self")}},{text:jse.core.lang.translate("BUTTON_COPY","admin_buttons"),"class":"btn btn-primary",click:function(){var e=$('input[name="page_token"]:first').attr("value"),t=$("tr[data-id]").has('input[type="checkbox"]:checked').data(),a=$(this).find('select[name="dest_category_id"] option:selected').val(),i=[window.location.origin,window.location.pathname,"?action=multi_action_confirm",(t.isProduct?"&pID=":"&cID=")+t.id,"&cPath="+t.cpath].join(""),o=c("search");0!==o&&null!==o&&(i+="&search="+o);var d=$('<form name="multi_action_form" method="post" action='+i+"></form>");d.append('<input type="hidden" name="cPath" value='+t.cpath+">"),d.append('<input type="hidden" name="page_token" value='+e+">"),$("tr[data-id]").find('input[type="checkbox"]:checked').clone().appendTo(d),n.find("input").clone().appendTo(d),d.append('<input type="hidden" name="dest_category_id" value='+a+">"),d.append('<input type="hidden" name="multi_copy_confirm" value="MoveConfirm">'),d.appendTo("body"),d.submit()}})}return e},l=function(){t.dialog({title:jse.core.lang.translate("TEXT_INFO_HEADING_DELETE_ELEMENTS","categories"),modal:!0,dialogClass:"gx-container modal-old-table",buttons:d(),width:420,closeOnEscape:!1,open:function(){$(".ui-dialog-titlebar-close").hide()}})},p=function(){t.dialog({title:jse.core.lang.translate("TEXT_INFO_HEADING_MOVE_ELEMENTS","categories"),modal:!0,dialogClass:"gx-container modal-old-table",buttons:d(),width:420,closeOnEscape:!1,open:function(){$(".ui-dialog-titlebar-close").hide()}})},s=function(){n.find("tr:eq(-2)").hide(),n.dialog({title:jse.core.lang.translate("TEXT_INFO_HEADING_COPY_TO","categories"),modal:!0,dialogClass:"gx-container modal-old-table",buttons:d(),width:420,closeOnEscape:!1,open:function(){$(".ui-dialog-titlebar-close").hide()}})};return o.init=function(e){switch(i.action){case"delete":l();break;case"move":p();break;case"copy":s()}e()},o});