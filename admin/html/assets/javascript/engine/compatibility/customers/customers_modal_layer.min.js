"use strict";gx.compatibility.module("customers_modal_layer",[],function(e){var t=$(this),n=($("#modal_layer_container"),{}),a=$.extend(!0,{},n,e),o={},i=window.location.origin+window.location.pathname,s="?"+window.location.search.replace(/\?/,"").replace(/cID=[\d]+/g,"").replace(/action=[\w]+/g,"").replace(/pageToken=[\w]+/g,"").concat("&").replace(/&[&]+/g,"&").replace(/^&/g,""),c=function(e){var t,n,o=[];switch(a.action){case"delete":t=e.find("input:first"),n=e.find("a.btn"),$(t).hide(),$(n).hide(),o.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close"),n.trigger("click")}},{text:jse.core.lang.translate("delete","buttons"),"class":"btn btn-primary",click:function(){var e={pageToken:$('input[name="page_token"]:first').attr("value"),cID:window.location.href.match(/cID=\d+/)[0]};e.url=[i,s,"action=deleteconfirm","&"+e.cID].join("");var t=$('<form name="customers" method="post" action='+e.url+"></form>");t.append('<input type="hidden" name="page_token" value='+e.pageToken+">"),t.append('<input type="hidden" name="deleteconfirm" value="DeleteConfirm">'),t.appendTo("body"),t.submit()}});break;case"editstatus":t=e.find("input:eq(1)"),n=e.find("a.btn"),$(t).hide(),$(n).hide(),o.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close"),window.open(n.attr("href"),"_self")}},{text:jse.core.lang.translate("update","buttons"),"class":"btn btn-primary",click:function(){var t={pageToken:$('input[name="page_token"]:first').attr("value"),cID:window.location.href.match(/cID=\d+/)[0],status:e.find("select").val()};t.url=[i,s,"action=statusconfirm","&"+t.cID].join("");var n=$('<form name="customers" method="post" action='+t.url+"></form>");n.append('<input type="hidden" name="page_token" value='+t.pageToken+">"),n.append('<input type="hidden" name="status" value='+t.status+">"),n.append('<input type="hidden" name="statusconfirm" value="Update">'),n.appendTo("body"),n.submit()}});break;case"iplog":o.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close")}});break;case"new_memo":console.log(t),o.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close")}}),o.push({text:jse.core.lang.translate("send","buttons"),"class":"btn btn-primary",click:function(t){e.submit()}})}return o},l=function(){t.dialog({title:jse.core.lang.translate("TEXT_INFO_HEADING_DELETE_CUSTOMER","admin_customers"),modal:!0,dialogClass:"gx-container",buttons:c(t),width:420,closeOnEscape:!1,open:function(){$(".ui-dialog-titlebar-close").hide()}})},r=function(){t.dialog({title:jse.core.lang.translate("TEXT_INFO_HEADING_STATUS_CUSTOMER","admin_customers"),modal:!0,dialogClass:"gx-container",buttons:c(t),width:420,closeOnEscape:!1,open:function(){$(".ui-dialog-titlebar-close").hide(),$(this).find('select[name="status"]').css({width:"100%",height:"35px",fontSize:"12px"})}})},d=function(){t=$("<div></div>"),$("[data-iplog]").each(function(){t.append(this),t.append("<br><br>")}),t.appendTo("body"),t.dialog({title:"IP-Log",modal:!0,dialogClass:"gx-container",buttons:c(t),width:420,closeOnEscape:!1})},u=function(e){var t=$("#customer_memo_form");e.preventDefault(),t.dialog({title:jse.core.lang.translate("TEXT_NEW_MEMO","admin_customers"),modal:!0,dialogClass:"gx-container",buttons:c(t),width:580})};return o.init=function(e){switch(a.action){case"delete":l();break;case"editstatus":r();break;case"iplog":d();break;case"new_memo":t.on("click",u)}e()},o});