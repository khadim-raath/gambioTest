"use strict";gx.controllers.module("add_category_to_product",[],function(t){var e=$(this),n={},i=($.extend(!0,{},n,t),{}),a=function(){var t=e.find(".category-template").clone().removeClass("category-template").addClass("category-link-wrapper").removeClass("hidden");e.find(".category-link-wrapper:last").removeClass("remove-border").after(t),t.find("select").prop("disabled",!1).on("change",l)},l=function(){var t=($(this).find("option:selected").html().match(/&nbsp;/g)||[]).length,e=[];t>0&&e.unshift($(this).find("option:selected").html().replace(/&nbsp;/g,"")),t>3&&$(this).find("option:selected").prevAll().each(function(){($(this).html().match(/&nbsp;/g)||[]).length===t-3&&t>3&&(t-=3,e.unshift($(this).html().replace(/&nbsp;/g,"")))}),$(this).parents(".category-link-wrapper").find(".category-path").html(e.join(" > "))},s=function(){var t,e,n=[],i=[],a=$(this).find("option:selected"),l=$(".multi-select-container").parent();$.each(a,function(){t=($(this).html().match(/&nbsp;/g)||[]).length,e=t,t>0&&(i=[],i.unshift($(this).html().replace(/&nbsp;/g,"")),$(this).prevAll().each(function(){($(this).html().match(/&nbsp;/g)||[]).length===e-3&&e>3&&(e-=3,i.unshift($(this).html().replace(/&nbsp;/g,"")))}),n.push(i))}),l.empty(),n.length>0?$.each(n,function(){l.append('<div class="span12 multi-select-container"><label class="category-path">'+this.join(" > ")+"</label></div>")}):l.append('<div class="span12 multi-select-container"></div>')};return i.init=function(t){var n=e.find("select");e.find(".add-category").on("click",a),n.prop("multiple")?n.on("change",s):n.on("change",l),t()},i});