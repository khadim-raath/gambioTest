"use strict";gx.controllers.module("module_center",["datatable"],function(o){var n=$(this),t={},a=($.extend(!0,{},t,o),{}),e=function(o){$.ajax({url:"admin.php?do=ModuleCenter/GetData&module="+o,type:"GET",dataType:"json"}).success(function(o){o.success&&($(".configuration-box-header h2").html(o.payload.title),$(".configuration-box-description p").html(o.payload.description),$(".gx-configuration-box a.btn").attr("href","admin.php?do="+o.payload.name+"ModuleCenterModule"),o.payload.isInstalled?($('.gx-configuration-box form button[name="uninstall"]').show(),$(".gx-configuration-box form a.btn").show(),$('.gx-configuration-box form button[name="install"]').hide()):($(".gx-configuration-box form").attr("action","admin.php?do=ModuleCenter/Store"),$('.gx-configuration-box form button[name="uninstall"]').hide(),$(".gx-configuration-box form a.btn").hide(),$('.gx-configuration-box form button[name="install"]').show()),$('.gx-configuration-box form input[name="module"]').val(o.payload.name),$(".gx-configuration-box").css("visibility","visible"))})},i=function(o){o.preventDefault();var n=$("#module-center-confirmation-dialog"),t=$(".gx-configuration-box").find('input[name="module"]').val();n.find(".modal-info-text").html(jse.core.lang.translate("text_uninstall_confirmation","module_center")),n.find('input[name="module"]').val(t),n.dialog({title:jse.core.lang.translate("uninstall_confirmation_title","module_center").replace("%s",t),modal:!0,dialogClass:"gx-container",buttons:[{text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close")}},{text:jse.core.lang.translate("uninstall","buttons"),"class":"btn btn-primary",click:function(){n.find("form").submit()}}]})},l=function(o){if(""===o)return{};for(var n={},t=0;t<o.length;++t){var a=o[t].split("=",2);1===a.length?n[a[0]]="":n[a[0]]=decodeURIComponent(a[1].replace(/\+/g," "))}return n}(window.location.search.substr(1).split("&")),r=function(){var o=window.location.hash.substring(1);""!==o&&e(o)},s=function(){$(".gx-modules-table .dataTableRow.active").removeClass("active"),$(this).addClass("active"),$("html, body").animate({scrollTop:0})};return a.init=function(o){jse.libs.datatable.create(n.find(".gx-modules-table"),{dom:"t",autoWidth:!1,pageLength:1e3,columnDefs:[{targets:[1,2],orderable:!1}],order:[]}),"undefined"!=typeof l.module?e(l.module):$(".gx-configuration-box").css("visibility","hidden"),r(),$(window).on("hashchange",r),$(".gx-modules-table .dataTableRow").on("click",s),$('.configuration-box-footer button[name="uninstall"]').on("click",i),o()},a});