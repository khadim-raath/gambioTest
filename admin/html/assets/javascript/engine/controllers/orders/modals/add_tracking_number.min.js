"use strict";gx.controllers.module("add_tracking_number",["modal",gx.source+"/libs/info_box"],function(e){function a(e){e.preventDefault();var a=t.data("orderId"),r=$("#delivery-service").find("option:selected").val(),n=$('input:text[name="tracking-number"]').val();if(n.length)$.ajax({url:"./admin.php?do=OrdersModalsAjax/StoreTrackingNumber",data:{orderId:a,trackingNumber:n,parcelServiceId:r,pageToken:jse.core.config.get("pageToken")},method:"POST",dataType:"JSON"}).done(function(e){t.modal("hide"),jse.libs.info_box.service.addSuccessMessage(jse.core.lang.translate("ADD_TRACKING_NUMBER_SUCCESS","admin_orders")),$(".table-main").DataTable().ajax.reload()}).fail(function(e,a,r){jse.libs.modal.message({title:jse.core.lang.translate("error","messages"),content:jse.core.lang.translate("ADD_TRACKING_NUMBER_ERROR","admin_orders")}),jse.core.debug.error("Store Tracking Number Error",e,a,r)});else{var o=t.find(".modal-footer"),d=jse.core.lang.translate("TXT_SAVE_ERROR","admin_general");o.find("span").remove(),o.prepend('<span class="text-danger">'+d+"</span>")}}function r(){$(this).find("#tracking-number").val(""),$(this).find(".modal-footer span").remove()}function n(e){e.stopPropagation(),$(this).data("orderId",$(e.relatedTarget).data("orderId"))}function o(e){var r=e.keyCode?e.keyCode:e.which;13===r&&a(e)}var t=$(this),d={};return d.init=function(e){t.on("show.bs.modal",n).on("hidden.bs.modal",r).on("click","#store-tracking-number",a).on("keypress",o),e()},d});