"use strict";gx.controllers.module("email_invoice",["modal"],function(e){function a(e){var a={oID:s.data("orderId"),type:"invoice",mail:"1",gm_quick_mail:"1"},r=jse.core.config.get("appUrl")+"/admin/gm_pdf_order.php?"+$.param(a),d={gm_mail:i.bindings.emailAddress.get(),gm_subject:i.bindings.subject.get()},n=$(e.target);n.addClass("disabled").prop("disabled",!0),$.ajax({url:r,data:d,method:"POST"}).done(function(e){var a=jse.core.lang.translate("MAIL_SUCCESS","gm_send_order");$(".orders .table-main").DataTable().ajax.reload(),$(".orders .table-main").orders_overview_filter("reload"),jse.libs.info_box.service.addSuccessMessage(a)}).fail(function(e,a,s){var i=jse.core.lang.translate("error","messages"),r=jse.core.lang.translate("MAIL_UNSUCCESS","gm_send_order");jse.libs.modal.message({title:i,content:r})}).always(function(){s.modal("hide"),n.removeClass("disabled").prop("disabled",!1)})}var s=$(this),i={bindings:{subject:s.find(".subject"),emailAddress:s.find(".email-address")}};return i.init=function(e){s.on("click",".btn.send",a),e()},i});