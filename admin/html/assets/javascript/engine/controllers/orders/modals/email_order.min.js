"use strict";gx.controllers.module("email_order",["modal"],function(e){function s(e){var s={oID:a.data("orderId"),type:"send_order"},n=jse.core.config.get("appUrl")+"/admin/gm_send_order.php?"+$.param(s),r={gm_mail:d.bindings.emailAddress.get(),gm_subject:d.bindings.subject.get()},t=$(e.target);t.addClass("disabled").prop("disabled",!0),$.ajax({url:n,data:r,method:"POST"}).done(function(e){var a=jse.core.lang.translate("MAIL_SUCCESS","gm_send_order"),d=$("tbody tr#"+s.oID);d.find("td.actions i.tooltip-confirmation-not-sent").remove(),jse.libs.info_box.service.addSuccessMessage(a)}).fail(function(e,s,a){var d=jse.core.lang.translate("error","messages"),n=jse.core.lang.translate("MAIL_UNSUCCESS","gm_send_order");jse.libs.modal.message({title:d,content:n})}).always(function(){a.modal("hide"),t.removeClass("disabled").prop("disabled",!1)})}var a=$(this),d={bindings:{subject:a.find(".subject"),emailAddress:a.find(".email-address")}};return d.init=function(e){a.on("click",".btn.send",s),e()},d});