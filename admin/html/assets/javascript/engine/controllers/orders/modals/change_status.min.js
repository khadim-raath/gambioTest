"use strict";gx.controllers.module("change_status",["modal"],function(e){function n(e){if(e.stopPropagation(),""!==t.bindings.status.get()){var n=jse.core.config.get("appUrl")+"/admin/admin.php?do=OrdersModalsAjax/ChangeOrderStatus",d={selectedOrders:t.bindings.selectedOrders.get().split(", "),statusId:t.bindings.status.get(),notifyCustomer:t.bindings.notifyCustomer.get(),sendParcelTrackingCode:t.bindings.sendParcelTrackingCode.get(),sendComment:t.bindings.sendComment.get(),comment:t.bindings.comment.get(),pageToken:jse.core.config.get("pageToken")},a=$(e.target);a.addClass("disabled").attr("disabled",!0),$.ajax({url:n,data:d,method:"POST"}).done(function(e){var n=d.notifyCustomer?jse.core.lang.translate("MAIL_SUCCESS","gm_send_order"):jse.core.lang.translate("SUCCESS_ORDER_UPDATED","orders");$(".orders .table-main").DataTable().ajax.reload(null,!1),$(".orders .table-main").orders_overview_filter("reload"),jse.libs.info_box.service.addSuccessMessage(n)}).always(function(){s.modal("hide"),a.removeClass("disabled").attr("disabled",!1)})}}var s=$(this),t={bindings:{selectedOrders:s.find(".selected-orders"),status:s.find("#status-dropdown"),notifyCustomer:s.find("#notify-customer"),sendParcelTrackingCode:s.find("#send-parcel-tracking-code"),sendComment:s.find("#send-comment"),comment:s.find("#comment")}};return t.init=function(e){s.on("click",".btn.save",n),e()},t});