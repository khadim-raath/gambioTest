"use strict";gx.controllers.module("init",["datatable","modal","loading_spinner","user_configuration_service",gx.source+"/libs/button_dropdown",gx.source+"/libs/orders_overview_columns"],function(e){function r(r,a){var t=1,n="desc";if(r.sort){n="-"===r.sort.charAt(0)?"desc":"asc";var o=r.sort.slice(1),i=!0,s=!1,l=void 0;try{for(var c,d=a[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var u=c.value;if(u.name===o){t=a.indexOf(u);break}}}catch(g){s=!0,l=g}finally{try{!i&&d["return"]&&d["return"]()}finally{if(s)throw l}}}else e.activeColumns.indexOf("number")>-1&&(t=e.activeColumns.indexOf("number"));return[[t,n]]}function a(e,r){if(!e.filter)return[];var a=[],t=!0,n=!1,o=void 0;try{for(var i,s=r[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var l=i.value,c=null,d=e.filter[l.name];d&&(c={search:d}),a.push(c)}}catch(u){n=!0,o=u}finally{try{!t&&s["return"]&&s["return"]()}finally{if(n)throw o}}return a}var t=$(this),n={};return n.init=function(n){var o=jse.libs.datatable.prepareColumns(t,jse.libs.orders_overview_columns,e.activeColumns),i=$.deparam(window.location.search.slice(1)),s=parseInt(i.length||e.pageLength);jse.libs.datatable.create(t,{autoWidth:!1,dom:"t",pageLength:s,displayStart:parseInt(i.page)?(parseInt(i.page)-1)*s:0,serverSide:!0,language:jse.libs.datatable.getTranslations(jse.core.config.get("languageCode")),ajax:{url:jse.core.config.get("appUrl")+"/admin/admin.php?do=OrdersOverviewAjax/DataTable",type:"POST",data:{pageToken:jse.core.config.get("pageToken")}},orderCellsTop:!0,order:r(i,o),searchCols:a(i,o),columns:o}),jse.libs.datatable.error(t,function(e,r,a,t){jse.libs.modal.message({title:"DataTables "+jse.core.lang.translate("error","messages"),content:t})}),t.on("datatable_custom_pagination:length_change",function(e,r){jse.libs.user_configuration_service.set({data:{userId:jse.core.registry.get("userId"),configurationKey:"ordersOverviewPageLength",configurationValue:r}})}),t.on("draw.dt",function(){t.find("thead input:checkbox").prop("checked",!1).trigger("change",[!1]),t.find("tbody").attr("data-gx-widget","single_checkbox"),gx.widgets.init(t)}),n()},n});