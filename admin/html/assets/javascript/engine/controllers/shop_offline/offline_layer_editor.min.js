"use strict";gx.controllers.module("offline_layer_editor",["form","fallback"],function(t){var i=$(this),e={},n=($.extend(!0,{},e,t),i.data().lightboxParams),a={},r=null,l="",o=function(t){r.each(function(){var i=$(this),e=i.attr("name");e=t?e.replace(l,""):e+l,i.attr("name",e)})};return a.init=function(t){var e=$("#lightbox_package_"+n.identifier),a=i.find(".lightbox_content_container form"),c=$(n.element).closest("tr"),s=jse.libs.fallback.getData(c);r=c.find("[name]"),l="_tmp_"+parseInt(Math.random()*(new Date).getTime()),o(),jse.libs.form.prefillForm(a,s,!1),jse.libs.fallback.setupWidgetAttr(i),gx.extensions.init(i),gx.controllers.init(i),gx.widgets.init(i),gx.compatibility.init(i),e.on("click",".ok",function(){a.find("textarea").each(function(){var t=$(this),i=t.attr("name"),e=window.CKEDITOR?window.CKEDITOR.instances[i]:null;e&&t.val(e.getData())}),e.find("form").trigger("layerClose"),o(!0),jse.libs.form.prefillForm(c,jse.libs.fallback.getData(a),!1),$.lightbox_plugin("close",n.identifier)}),e.on("click",".close",function(){o(!0)}),$(window).on("JSENGINE_INIT_FINISHED",function(t,i){"ckeditor"===i.widget&&$(t.target).trigger("ckeditor.update")}),i.find("form").trigger("language_switcher.updateField",[]),t()},a});