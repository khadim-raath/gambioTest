"use strict";gx.controllers.module("image_processing",[gx.source+"/libs/info_messages"],function(s){var e=$(this),o={},a=!1,r=($.extend(!0,{},o,s),jse.libs.info_messages),t={},i=function(){var s=jse.core.lang.translate("image_processing_title","image_processing");$(".process-modal").dialog({title:s,modal:!0,dialogClass:"gx-container",buttons:[{text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close")}}],width:580}),c(1)},c=function n(s){$.ajax({type:"POST",url:"admin.php?do=ImageProcessing/Process",timeout:3e4,dataType:"json",context:this,data:{image_number:s},success:function(e){var o=100/e.payload.imagesCount*s;o=Math.round(o),$(".process-modal .progress-bar").attr("aria-valuenow",o),$(".process-modal .progress-bar").css("min-width","70px"),$(".process-modal .progress-bar").css("width",o+"%"),$(".process-modal .progress-bar").html(s+" / "+e.payload.imagesCount),e.success||(a=!0),e.payload.finished?($(".process-modal").dialog("close"),$(".process-modal .progress-bar").attr("aria-valuenow",0),$(".process-modal .progress-bar").css("width","0%"),$(".process-modal .progress-bar").html(""),a?r.addError(jse.core.lang.translate("image_processing_error","image_processing")):r.addSuccess(jse.core.lang.translate("image_processing_success","image_processing")),a=!1):(s+=1,n(s))}})};return t.init=function(s){e.on("click",".js-process",i),s()},t});