"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(r,i,s){return i&&e(r.prototype,i),s&&e(r,s),r}}();jse.libs.info_box=jse.libs.info_box||{},function(e){var r="new",i="read",s="hidden",t="deleted",n="info",o="warning",a="success",u="alwayson",f="hideable",l="removable",d=".info-box",c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getMessages",value:function(){return this._performRequest("/GetAllMessages","GET").then(JSON.parse)}},{key:"setStatus",value:function(e,n){var o=[r,i,s,t];if(!e||!n)throw new Error("Missing ID or status");if(o.indexOf(n)===-1)throw new Error("Invalid status provided");return this._performRequest("/SetMessageStatus","GET",{id:e,status:n})}},{key:"deleteById",value:function(e){if(!e)throw new Error("Missing ID");return this._performRequest("/DeleteById","GET",{id:e})}},{key:"deleteBySource",value:function(e){if(!e)throw new Error("Missing source");return this._performRequest("/DeleteBySource","GET",{source:e})}},{key:"deleteByIdentifier",value:function(e){if(!e)throw new Error("Missing identifier");return this._performRequest("/DeleteByIdentifier","GET",{identifier:e})}},{key:"reactivateMessages",value:function(){return this._performRequest("/ReactivateMessages","GET")}},{key:"addMessage",value:function(e){if(!e)throw new Error("Missing message object");if(!e.source)throw new Error("Missing source");if(!e.identifier)throw new Error("Missing identifier");if(!e.status||[r,i,s,t].indexOf(e.status)===-1)throw new Error("Missing or invalid status");if(!e.type||[n,o,a].indexOf(e.type)===-1)throw new Error("Missing or invalid type");if(!e.visibility||[u,f,l].indexOf(e.visibility)===-1)throw new Error("Missing or invalid visibility");if(!e.buttonLink)throw new Error("Missing button link");if("undefined"==typeof e.customerId)throw new Error("Missing customer ID");if(!e.message)throw new Error("Missing message");if(!e.headline)throw new Error("Missing headline");if(!e.buttonLabel)throw new Error("Missing button label");if(!e.message)throw new Error("Missing message");return this._performRequest("/AddMessage","GET",e)}},{key:"_performRequest",value:function(e,r,i){var s="admin.php?do=AdminInfoBoxAjax",t={url:s+e,data:i,method:r};return $.ajax(t)}},{key:"addSuccessMessage",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._performRequest("/AddSuccessMessage","GET",e?{message:e}:{});r||i.done(function(){return $(d).trigger("refresh:messages")})}}]),e}();e.service=c}(jse.libs.info_box);