"use strict";gx.widgets.module("statistic_chart",[],function(t){var a=$(this),e=t.userId,i=$(".statistic-chart-dropdown"),r={sales:{apiUrl:"./admin.php?do=Dashboard/getSalesStatisticsData",title:jse.core.lang.translate("STATISTICS_SALES","start")},visitors:{apiUrl:"./admin.php?do=Dashboard/getVisitorsStatisticsData",title:jse.core.lang.translate("STATISTICS_VISITORS","start")},newCustomers:{apiUrl:"./admin.php?do=Dashboard/getNewCustomerStatisticsData",title:jse.core.lang.translate("STATISTICS_NEW_CUSTOMERS","start")},orders:{apiUrl:"./admin.php?do=Dashboard/getOrderStatisticsData",title:jse.core.lang.translate("STATISTICS_ORDERS_COUNT","start")}},n={},s=function(t){var e=a.find(".loader"),i=e.length,r="loader fa fa-fw fa-spinner fa-spin",n=$('<i class="'+r+'"></i>');i&&e.remove(),t&&a.append(n)},o=function(t,n,o){if(a.empty(),o||(o=i.find("option:selected").val()),o&&o in r==!1)throw new Error("Invalid item!");s(!0);var l=$.ajax({url:r[o].apiUrl,type:"GET",dataType:"JSON",data:{userId:e,item:o,interval:n}});l.done(function(t){s(!1),a.empty(),$.each(t.data,function(){this.amount=parseInt(this.amount)}),Morris.Area({element:a,data:t.data,xkey:"period",ykeys:["amount"],xLabels:t.type,labels:[r[o].title],lineWidth:2,eventStrokeWidth:1,goalStrokeWidth:1,fillOpacity:.25,behaveLikeLine:!0,hideHover:"auto",lineColors:["#2196F3"],dateFormat:function(t){var a=new Date(t),e=a.getDate().toString(),i=(a.getMonth()+1).toString(),r=a.getFullYear().toString();return(e[1]?e:"0"+e[0])+"."+(i[1]?i:"0"+i[0])+"."+r}})})};return n.init=function(t){a.on("get:data",o),t()},n});