"use strict";gx.widgets.module("multi_select",[],function(e){function t(){$.fn.multi_select||$.fn.extend({multi_select:function(e){for(var t=arguments.length,l=Array(t>1?t-1:0),o=1;o<t;o++)l[o-1]=arguments[o];if(!$(this).is("select"))throw new Error('Called the "multi_select" method on an invalid object (select box expected).');$.each(this,function(){switch(e){case"reload":n.apply(void 0,[$(this)].concat(l));break;case"refresh":a(this)}})}})}function l(e,t){e.empty(),$.each(t,function(t,l){e.append(new Option(l.text,l.value))})}function n(e,t){if(t=t||e.data("source"),!t)throw new Error("Multi Select Reload: Neither URL nor data-source contain a URL value.");e.data("source",t),$.getJSON(t).done(function(t){l(e,t),e[0].sumo.reload(),e.trigger("reload")}).fail(function(e,t,l){jse.core.debug.error("Multi Select AJAX Error: ",e,t,l)})}function a(e){if(void 0===e.sumo)throw new Error("Multi Select Refresh: The provided select element is not an instance of SumoSelect.",e);e.sumo.reload(),o.apply($(e.parentNode).find(".opt")[0])}function o(){var e=$(this).parents(".optWrapper"),t=e.find(".opt.selected").length===e.find(".opt").length,l=e.find(".opt.selected").length>0,n=e.find(".select-all");n.removeClass("partial-select"),t?e.siblings(".CaptionCont").children("span").text(jse.core.lang.translate("all_selected","admin_labels")):l&&n.addClass("partial-select")}var r=$(this),c={selectAll:!0,csvDispCount:2,captionFormat:"{0} "+jse.core.lang.translate("selected","admin_labels"),locale:["OK",jse.core.lang.translate("CANCEL","general"),jse.core.lang.translate("SELECT_ALL","general")]},i=$.extend(!0,{},c,e),s={};return s.init=function(e){t(),r.find("[data-multi_select-instance]").each(function(){var e=$(this);e.removeAttr("data-multi_select-instance"),e.SumoSelect(i),void 0!==e.data("multi_selectSource")&&(e.data("source",e.data("multi_selectSource")),e.removeAttr("data-multi_select-source"),$.getJSON(e.data("multi_selectSource")).done(function(t){l(e,t),e[0].sumo.unload(),e.SumoSelect(i),e.trigger("reload")}).fail(function(e,t,l){jse.core.debug.error("Multi Select AJAX Error: ",e,t,l)}))}),e()},r.on("click",".select-all, .opt",o),s});