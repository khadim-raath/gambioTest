"use strict";gambio.widgets.module("image_gallery",[gambio.source+"/libs/modal.ext-magnific",gambio.source+"/libs/modal",gambio.source+"/libs/events",gambio.source+"/libs/responsive"],function(e){var t=$(this),i=null,a=$("body"),s=null,n={noTemplate:!1,preloader:!0,closeOnOuter:!0,dialogClass:"product_images",gallery:{enabled:!0}},l={target:".swiper-slide",template:"#product_image_layer",breakpoint:40},o=$.extend(!0,{},l,e),r={},p=function(e){if(e.preventDefault(),jse.libs.template.responsive.breakpoint().id>o.breakpoint){var t=$(this),a=i.find("[data-swiper-slider-options]"),l=t.data(),r=l.index||l.swiperSlideIndex||0;a.each(function(){$(this).attr("data-swiper-init-slide",r)}),s=jse.libs.template.modal.custom(n)}},c=function(){jse.libs.template.responsive.breakpoint().id<=o.breakpoint&&s&&s.close(!0)},d=function(e,t){i.find(".swiper-container template").each(function(){var e=$(this),i=e.siblings(".swiper-wrapper");$.each(t,function(t,a){var s=t+"-category",n="",l=e.html();$.each(a||[],function(e,t){t.className=s,n+=Mustache.render(l,t)}),i.find("."+s).remove(),i.append(n)})})};return r.init=function(e){n.template=o.template,i=$(o.template),t.on("click",o.target,p).on(jse.libs.template.events.SLIDES_UPDATE(),d),a.on(jse.libs.template.events.BREAKPOINT(),c),e()},r});