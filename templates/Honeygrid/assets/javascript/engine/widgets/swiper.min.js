"use strict";gambio.widgets.module("swiper",[gambio.source+"/libs/events",gambio.source+"/libs/responsive"],function(e){var i=$(this),t=$("body"),n=null,s=null,l=null,a=null,r=!0,o=null,d=null,p=!0,u=null,c=null,f=!1,v=!1,w={pagination:".swiper-pagination",nextButton:".swiper-button-next",prevButton:".swiper-button-prev",paginationClickable:!0,loop:!0,autoplay:3,autoplayDisableOnInteraction:!1},b={sliderOptions:null,controls:null,target:null,initSlide:null,autoOff:!1,disableTranslucenceFix:!1,breakpoints:[{breakpoint:40,usePreviewBullets:!1,slidesPerView:2,centeredSlides:!0},{breakpoint:60,usePreviewBullets:!0,slidesPerView:3},{breakpoint:80,usePreviewBullets:!0,slidesPerView:3},{breakpoint:100,usePreviewBullets:!0,slidesPerView:5}]},g=$.extend({},b,e),m={},h=function(e,i){var t=n.eq(e),s=t.find("img"),l=s.attr("alt"),a=t.data("thumbImage");return a?'<img src="'+a+'" alt="'+l+'" class="'+i+'" />':""},S=function(){var e=i.find(".swiper-slide-active").index();return e=f?e-1:e,e=e||0},O=function(e){n=i.find(".swiper-slide:not(.swiper-slide-duplicate)"),e=f?e+1:e,n.removeClass("active").eq(e).addClass("active")},y=function(){try{o&&o.stopAutoplay()}catch(e){}},P=function(){try{o&&o.startAutoplay()}catch(e){}},x=function(e,t){e.stopPropagation(),O(t),v=!0,i.off("mouseleave.swiper"),o.stopAutoplay();var s=f?t+1:t;s>n.length-1&&(s=0),o.slideTo(s),v=!1},k=function(e){e.preventDefault(),e.stopPropagation();var i=$(this),t=i.index();t=f?t-1:t,O(t),l.trigger(jse.libs.template.events.SWIPER_GOTO(),t)},T=function(){if(!v){var e=S(),i=n.length-2;e=e<0?n.length-3:f&&e===i?e-i:e,O(e),s.trigger(jse.libs.template.events.SWIPER_GOTO(),e)}},I=function(){!g.disableTranslucenceFix&&d&&"fade"===d.effect&&(i.find(".swiper-slide").filter(":not(.swiper-slide-active)").fadeTo(300,0,function(){$(this).css("visibility","hidden")}),i.find(".swiper-slide").filter(".swiper-slide-active").fadeTo(300,1,function(){$(this).css("visibility","")}))},B=function(){var e=u||{},t=jse.libs.template.responsive.breakpoint(),n=g.breakpoints[0]||{},l=null;if(t.id!==e.id&&(u=$.extend({},t),$.each(g.breakpoints,function(e,i){return!(i.breakpoint>t.id)&&(l=e,void(n=i))}),g.sliderOptions&&g.sliderOptions.breakpoints&&$.each(g.sliderOptions.breakpoints,function(e,i){if(i.breakpoint===t.id)return n=i,!1}),l!==c||r)){if(d=$.extend({},w,g.sliderOptions||{},n),d.usePreviewBullets&&p&&(d.paginationBulletRender=h),d.autoplay=d.autoplay?1e3*d.autoplay:0,o){d.initialSlide=S();try{o.destroy(!0,!0)}catch(a){o=null}}else d.initialSlide=g.initSlide||d.initialSlide||0;var v=i.find(".swiper-slide:not(.swiper-slide-duplicate)");if(!g.autoOff||v.length>d.slidesPerView&&g.autoOff){i.addClass("swiper-is-active").removeClass("swiper-is-not-active");try{o=new Swiper(i,d)}catch(b){return}o.off("onTransitionEnd onSlideChangeStart").on("onTransitionEnd",I),s.length&&o.on("onSlideChangeStart",T),i.off("mouseenter.swiper mouseleave.swiper "+jse.libs.template.events.SWIPER_GOTO()+" "+jse.libs.template.events.SLIDES_UPDATE()).on("mouseenter.swiper",y).on("mouseleave.swiper",P).on(jse.libs.template.events.SWIPER_GOTO(),x).on(jse.libs.template.events.SLIDES_UPDATE(),E),r&&(f=!!i.find(".swiper-slide-duplicate").length);var m=r&&g.initSlide?g.initSlide:S();O(m),s.length&&(s.attr("data-swiper-init-slide",m),T()),r=!1}else i.removeClass("swiper-is-active").addClass("swiper-is-not-active"),r=!0}},E=function(e,t){$.each(t,function(e,i){var t=e+"-category",s=[],l=[],r=a.html();n.filter("."+t).each(function(){var e=$(this),i=e.data().swiperSlideIndex;i=void 0===i?e.index():i,l.push(i)}),o.removeSlide(l),$.each(i||[],function(e,i){i.className=t,i.srcattr='src="'+i.src+'"',s.push(Mustache.render(r,i))}),o.appendSlide(s)}),n=i.find(".swiper-slide"),O(0);var s=f?1:0;o.slideTo(s,0)},C=function(){$(g.sliderOptions.nextButton).on("selectstart",function(){return!1}),$(g.sliderOptions.prevButton).on("selectstart",function(){return!1})};return m.init=function(e){n=i.find(".swiper-slide"),s=$(g.controls),l=$(g.target),a=i.find("template"),n.each(function(){if(!$(this).data().thumbImage)return p=!1,!1}),t.on(jse.libs.template.events.BREAKPOINT(),B),B(),g.target&&i.on("click.swiper",".swiper-slide",k),$(document).ready(function(){$(".swiper-vertical .swiper-slide[data-index]").css("display","inline-block"),$(".product-info-image .swiper-slide[data-index]").css("z-index","inherit"),$(".product-info-image .swiper-slide[data-index] .swiper-slide-inside img.img-responsive").fadeIn(1e3)}),I(),C(),e()},m});