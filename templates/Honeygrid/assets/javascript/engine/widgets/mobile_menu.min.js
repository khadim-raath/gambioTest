"use strict";gambio.widgets.module("mobile_menu",[gambio.source+"/libs/events",gambio.source+"/libs/responsive"],function(e){var a,t,s=$(this),o=$("body"),i=null,n=null,l={breakpoint:40,buttonActiveClass:"active",addClass:"in"},r=$.extend(!0,{},l,e),b={},d=function(e){var a=!1;i.each(function(){var t=$(this),s=$(this).parseModuleData("mobile_menu");if(!e||s&&s.target!==e.target)$(s.target).removeClass(r.addClass),t.removeClass(r.buttonActiveClass),o.removeClass(s.bodyClass);else if(s&&!a){var i=$(s.target);i.toggleClass(r.addClass),i.hasClass(r.addClass)?(o.addClass(s.bodyClass),t.addClass(r.buttonActiveClass),void 0!==t.data("mobilemenuToggleContentVisibility")&&u(!1)):(o.removeClass(s.bodyClass),t.removeClass(r.buttonActiveClass),void 0!==t.data("mobilemenuToggleContentVisibility")&&u(!0)),a=!0}})},u=function(e){var s=$("#wrapper, #footer"),o=$(document);e?(s.show(),o.scrollTop(a),o.scrollLeft(t),a=t=null):(a||(a=o.scrollTop()),t||(t=o.scrollLeft()),s.hide())},c=function(){var e=$(this),a=e.parseModuleData("mobile_menu");a.target?d(a):a.location&&(location.href=a.location)},p=function(e,a){a.id>r.breakpoint&&n?(d(null),$("#wrapper, #footer").show(),n=!1):a.id<=r.breakpoint&&!n&&(d(null),n=!0)},v=function(){$(this).parent().hasClass("open")||($(".navbar-categories").find(".navbar-topbar-item.open").removeClass("open"),$("#categories .navbar-collapse:first").animate({scrollTop:$(this).parent().position().top+$(this).parent().height()-$("#header .navbar-header").height()},500))};return b.init=function(e){n=jse.libs.template.responsive.breakpoint().id<=r.breakpoint,i=s.find("button"),o.on(jse.libs.template.events.BREAKPOINT(),p),$(".navbar-categories").on("mouseup",".navbar-topbar-item > a",v),s.on("click","button",c),e()},b});