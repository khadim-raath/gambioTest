"use strict";gambio.widgets.module("amazon_checkout",[],function(e){var t=$(this),n=$("body"),o=null,a=null,i=null,d={sellerId:null,orderReference:null,size:{width:"600px",height:"400px"},sizeReadOnly:{width:"400px",height:"185px"},countryTxt:"",buttonTxt:"",continueBtn:".btn-continue",errorClass:"amzadvpay_countrynotallowed",buttonAClass:"btn btn-default btn-block amazonadvpay_signout",buttonClass:"col-xs-6 col-sm-6 col-md-4 col-md-offset-1 amazonadvpay_signoutbutton",buttonAppendAfter:".btn-back",requestURL:"request_port.php?module=AmazonAdvPay",signoutErrorUrl:"shopping_cart.php?error=apa_signout"},s=$.extend(!0,{},d,e),r={},l=function(e){var n=e&&e.data&&e.data.action?e.data:{orderrefid:s.orderReference,action:"addressSelect"};$.post(s.requestURL,n).done(function(e){"true"===e.reload&&window.location.reload(),e.redirect_url&&"signOut"===n.action&&(window.location=e.redirect_url),"false"===e.country_allowed?(i.hide(),t.after(o)):"signOut"!==n.action&&(i.show(),t.next("."+s.errorClass).remove())}).fail(function(e){"signOut"===n.action&&(window.location=s.signoutErrorUrl)})};return r.init=function(e){if(!n.hasClass("amazon-payment-initialized")){n.addClass("amazon-payment-initialized"),o=$('<div class="'+s.errorClass+'">'+s.countryTxt+"</div>"),a=$('<div class="'+s.buttonClass+'"><a class="'+s.buttonAClass+'">'+s.buttonTxt+"</div></div>"),i=$(s.continueBtn),a.on("click",{orderrefid:"n/a",action:"signOut"},l),$(s.buttonAppendAfter).after(a);try{var t={sellerId:s.sellerId,amazonOrderReferenceId:s.orderReference,design:{size:s.size},onAddressSelect:l};new OffAmazonPayments.Widgets.AddressBook(t).bind("addressBookWidgetDiv"),new OffAmazonPayments.Widgets.Wallet(t).bind("walletWidgetDiv"),$.extend(t,{displayMode:"Read",design:{size:s.sizeReadOnly}}),new OffAmazonPayments.Widgets.AddressBook(t).bind("readOnlyAddressBookWidgetDiv"),new OffAmazonPayments.Widgets.Wallet(t).bind("readOnlyWalletWidgetDiv")}catch(d){}}e()},r});