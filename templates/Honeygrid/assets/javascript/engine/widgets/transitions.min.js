"use strict";gambio.widgets.module("transitions",[gambio.source+"/libs/events"],function(t){var i=$(this),s=[],n={duration:.5,open:!0,classClose:"",classOpen:""},e=$.extend(!0,{},n,t),a={},o=function(t){var i=e.duration;return t.add(t.children()).each(function(){var s=void 0!==t.css("transition-duration")?t.css("transition-duration"):void 0!==t.css("-webkit-transtion-duration")?t.css("-webkit-transtion-duration"):void 0!==t.css("-moz-transtion-duration")?t.css("-moz-transtion-duration"):void 0!==t.css("-ms-transtion-duration")?t.css("-ms-transtion-duration"):void 0!==t.css("-o-transtion-duration")?t.css("-o-transtion-duration"):-1;if(s>=0)return i=s,!1}),i=Math.round(1e3*parseFloat(i))},r=function(t,i){var n=$(t.target),e=n.clone(),a=$.extend({},n.data().transition||{},i),r=a.open?a.classClose:a.classOpen,l=a.open?a.classOpen:a.classClose,d=null,u=null,c=null,v=null;a.uid=a.uid||parseInt(1e5*Math.random(),10),r=r||"",l=l||"",s[a.uid]&&clearTimeout(s[a.uid]),e.appendTo(n.parent()),e.css({visibility:"hidden",display:"initial"}),d=e.outerHeight(),u=e.outerWidth(),n.removeAttr("style").removeClass("transition "+r).addClass(l),c=n.outerHeight(),v=n.outerWidth(),a.calcHeight?n.removeClass(l).css({height:d+"px",width:u+"px",visibility:"initial",display:"initial"}).addClass("transition "+l).css({height:c+"px",width:v+"px"}):n.removeClass(l).addClass("transition "+l);var m=o(n);s[a.uid]=setTimeout(function(){n.removeAttr("style").removeClass("transition").removeData("transition").triggerHandler(jse.libs.template.events.TRANSITION_FINISHED())},m),n.data("transition",a),e.remove()},l=function(){var t=$(this),i=t.data("transition")||{};$.isEmptyObject(i)||(s[i.uid]=s[i.uid]?clearTimeout(s[i.uid]):null,t.removeAttr("style").removeClass("transition").removeData("transition").triggerHandler(jse.libs.template.events.TRANSITION_FINISHED()))};return a.init=function(t){i.on(jse.libs.template.events.TRANSITION(),r).on(jse.libs.template.events.TRANSITION_STOP(),l),t()},a});